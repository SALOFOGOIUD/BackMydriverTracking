const mongoose = require('mongoose');

const uri = `mongodb+srv://Admin:${encodeURIComponent("Admin")}@treal.i7u0c.mongodb.net/BD_IUD?retryWrites=true&w=majority`;

async function connectDB() {
  try {
    await mongoose.connect(uri, { 
      serverSelectionTimeoutMS: 15000,
      socketTimeoutMS: 45000,
    });    

    console.log("Conectado a Mongo");

    // ðŸ”¹ Verifica que Mongoose estÃ© listo antes de aceptar peticiones
    console.log("ðŸ”¹ Estado de conexiÃ³n Mongoose:", mongoose.connection.readyState);
    
  } catch (error) {
    console.error("Error conexiÃ³n Mongo:", error.message);
    process.exit(1);
  }
}

module.exports = { connectDB };
